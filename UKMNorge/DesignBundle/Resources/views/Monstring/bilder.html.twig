{% extends "Layout/_"~ (singleMode is defined and singleMode ? 'singleMode' : 'base' ) ~".html.twig"|UKMpath %}

{% block javascripts %}
	<script src="//grafikk.ukm.no/UKMresponsive/swipebox/js/jquery.swipebox.js"></script>
	<script src="//grafikk.ukm.no/UKMresponsive/js/jquery.imagesGrid.js"></script>
	{{ parent() }}
	<script>
		$(document).ready(function(){
			$( '.swipebox' ).swipebox(
				{
					removeBarsOnMobile: false,
					hideBarsDelay: 0
				}
			);
			$(".images-grid").imagesGrid(
				{
					rowHeight:65, 
					margin: 5,
					
				}
			);
			
			$('.lazyLoad').each(function(){
				$(this).attr('src', $(this).attr('data-src'));
			});
		});
		
	</script>
{% endblock %}

{% block css %}
	<link rel="stylesheet" href="//grafikk.ukm.no/UKMresponsive/swipebox/css/swipebox.css" />
	{{ parent() }}
{% endblock %}

{% block content %}
	<div class="container">
		<div class="row">
			<div class="col-12">
				{% for forestilling in monstring.getProgram().getAll() if forestilling.getInnslag().getAntall > 0 %}
					<h2>{{ forestilling.getNavn() }}</h2>
						
					<div class="images-grid">
						{% for innslag in forestilling.getInnslag().getAll() %}
							{% for bilde in innslag.getBilder().getAll() if bilde.getPlid() == monstring.getId() %}
								{% spaceless %}
										<a href="{{ bilde.getSize('large').getUrl() }}" class="swipebox image-wrapper" data-width="{{ bilde.getSize('lite','medium').getWidth() }}" data-height="{{ bilde.getSize('lite','medium').getHeight() }}" title="{{ innslag.getNavn() }} av {{ bilde.getAuthor().getNiceName() }}">
											<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=" data-src="{{ bilde.getSize('lite', 'medium').getUrl() }}" alt="" class="image-thumb lazyLoad" />
										</a>
								{% endspaceless %}
							{% endfor %}
						{% endfor %}
					</div>
				{% endfor %}
	 		</div>
	 	</div>
	</div>
{% endblock content %}