{% extends "Layout/_"~ (singleMode is defined and singleMode ? 'singleMode' : 'base' ) ~".html.twig"|UKMpath %}

{% block content %}
	<div class="container">
		<h1>Påmeldte</h1>
		<div class="row">
			<div class="col-12 mb-4">
				<input type="text" name="filtrer" id="filterInnslag" placeholder="Skriv her for å filtrere listen..." class="form-control block" />
			</div>
		</div>
		
		{% if monstring.getType() == 'fylke' %}
			<div class="row mb-4">
				<div class="col-12">
					<h3>Filtrer</h3>
					
					<p class="bold mb-1 mt-3">
						Fylke
					</p>
					
					<div class="row" style="padding-left:.75em; padding-right: .75em;">
						{% for fylke in fylker %}
							<button class="col btn btn-sm m-1 btn-outline-primary filterFylke" id="fylke-{{ fylke.getId() }}" data-id="{{ fylke.getId() }}">{{ fylke.getNavn() }}</button>
						{% endfor %}
					</div>
					
					<p class="bold mb-1 mt-3">
						Kategori
					</p>
					
					<div class="row" style="padding-left: .75em; padding-right:.75em;">
						{% for kategori in kategorier %}
							<button class="col btn btn-sm m-1 btn-outline-primary filterKategori" id="kategori-{{ kategori.getId() }}" data-id="{{ kategori.getId() }}" >{{ kategori.getNavn() }}</button>
						{% endfor %}
					</div>
				</div>
			</div>
		{% endif %}
	 	
	 	<div class="row">
	 		<div class="col-12" id="searchList">
				{% for innslag in monstring.getInnslag().getAll() %}
					<div class="card innslagCard UKMcard mb-2 p-0 filter filter-kategori-{{ innslag.getType().getId() }} filter-fylke-{{ innslag.getFylke().getId() }}" data-visning="skjult" data-id="{{ innslag.getId() }}" id="innslag-{{innslag.getId()}}" data-filter="{{ innslag.getNavn() }}{% for person in innslag.getPersoner().getAll() %} {{ person.getNavn() }},{% endfor %}{% for kommune in monstring.getKommuner() if monstring.getType() == 'kommune' %}{{ kommune.getNavn() }},{% endfor %}">
				 		{% embed 'Monstring/innslag-liste.html.twig' with {'innslag': innslag} %}{% endembed %}
					</div>
				{% endfor %}
	 		</div>
	 	</div>
	</div>
{% endblock content %}

{% block javascripts %}
	{{ parent() }}
	<script type="text/javascript" src="{{ UKMasset("js/fastlivefilter.jquery.js") }}"></script>
	<script>
	jQuery(document).ready(function() {
		jQuery('#filterInnslag').fastLiveFilter('#searchList');
		jQuery('#filterInnslag').change();
	});
	</script>
{% endblock %}